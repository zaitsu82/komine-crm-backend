{
  "info": {
    "name": "Cemetery CRM API",
    "description": "Cemetery CRM Backend API の疎通確認用コレクション",
    "version": "1.0.0",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "variable": [
    {
      "key": "baseUrl",
      "value": "http://localhost:4000/api/v1",
      "type": "string"
    },
    {
      "key": "token",
      "value": "",
      "type": "string"
    }
  ],
  "item": [
    {
      "name": "認証",
      "item": [
        {
          "name": "ログイン",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"test@example.com\",\n  \"password\": \"password123\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/auth/login",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "auth",
                "login"
              ]
            }
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 200) {",
                  "    const responseJson = pm.response.json();",
                  "    pm.collectionVariables.set('token', responseJson.data.token);",
                  "    pm.test('Login successful', function () {",
                  "        pm.expect(responseJson.success).to.be.true;",
                  "        pm.expect(responseJson.data.user).to.have.property('id');",
                  "        pm.expect(responseJson.data.user).to.have.property('name');",
                  "        pm.expect(responseJson.data.user).to.have.property('email');",
                  "    });",
                  "}"
                ]
              }
            }
          ]
        },
        {
          "name": "新規ユーザー登録",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"新規ユーザー\",\n  \"email\": \"newuser@example.com\",\n  \"password\": \"password123\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/auth/register",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "auth",
                "register"
              ]
            }
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 201) {",
                  "    const responseJson = pm.response.json();",
                  "    pm.collectionVariables.set('token', responseJson.data.token);",
                  "    pm.test('Registration successful', function () {",
                  "        pm.expect(responseJson.success).to.be.true;",
                  "        pm.expect(responseJson.data.user).to.have.property('id');",
                  "        pm.expect(responseJson.data.user).to.have.property('name');",
                  "        pm.expect(responseJson.data.user).to.have.property('email');",
                  "    });",
                  "}"
                ]
              }
            }
          ]
        },
        {
          "name": "新規ユーザー登録（バリデーションエラー）",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"\",\n  \"email\": \"invalid-email\",\n  \"password\": \"123\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/auth/register",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "auth",
                "register"
              ]
            }
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Validation error', function () {",
                  "    pm.expect(pm.response.code).to.be.oneOf([400, 422]);",
                  "    const responseJson = pm.response.json();",
                  "    pm.expect(responseJson.success).to.be.false;",
                  "    pm.expect(responseJson.error.code).to.eql('VALIDATION_ERROR');",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "新規ユーザー登録（重複メールエラー）",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"重複ユーザー\",\n  \"email\": \"test@example.com\",\n  \"password\": \"password123\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/auth/register",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "auth",
                "register"
              ]
            }
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Conflict error', function () {",
                  "    pm.expect(pm.response.code).to.eql(409);",
                  "    const responseJson = pm.response.json();",
                  "    pm.expect(responseJson.success).to.be.false;",
                  "    pm.expect(responseJson.error.code).to.eql('CONFLICT');",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "現在のユーザー情報取得",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/auth/me",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "auth",
                "me"
              ]
            }
          },
          "response": []
        },
        {
          "name": "ログアウト",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/auth/logout",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "auth",
                "logout"
              ]
            }
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 200) {",
                  "    pm.collectionVariables.set('token', '');",
                  "    pm.test('Logout successful', function () {",
                  "        const responseJson = pm.response.json();",
                  "        pm.expect(responseJson.success).to.be.true;",
                  "    });",
                  "}"
                ]
              }
            }
          ]
        },
        {
          "name": "パスワード更新",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"currentPassword\": \"password123\",\n  \"newPassword\": \"newPassword456\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/auth/password",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "auth",
                "password"
              ]
            }
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 200) {",
                  "    pm.test('Password update successful', function () {",
                  "        const responseJson = pm.response.json();",
                  "        pm.expect(responseJson.success).to.be.true;",
                  "    });",
                  "}"
                ]
              }
            }
          ]
        },
        {
          "name": "パスワードリセット要求",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"test@example.com\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/auth/reset-password",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "auth",
                "reset-password"
              ]
            }
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 200) {",
                  "    pm.test('Password reset request successful', function () {",
                  "        const responseJson = pm.response.json();",
                  "        pm.expect(responseJson.success).to.be.true;",
                  "    });",
                  "}"
                ]
              }
            }
          ]
        },
        {
          "name": "トークンリフレッシュ",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/auth/refresh",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "auth",
                "refresh"
              ]
            }
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 200) {",
                  "    const responseJson = pm.response.json();",
                  "    pm.collectionVariables.set('token', responseJson.data.token);",
                  "    pm.test('Token refresh successful', function () {",
                  "        pm.expect(responseJson.success).to.be.true;",
                  "        pm.expect(responseJson.data.token).to.be.a('string');",
                  "    });",
                  "}"
                ]
              }
            }
          ]
        },
        {
          "name": "現在のユーザーの権限一覧取得",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/auth/permissions",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "auth",
                "permissions"
              ]
            }
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 200) {",
                  "    pm.test('Permissions retrieved successfully', function () {",
                  "        const responseJson = pm.response.json();",
                  "        pm.expect(responseJson.success).to.be.true;",
                  "        pm.expect(responseJson.data.permissions).to.be.an('array');",
                  "    });",
                  "}"
                ]
              }
            }
          ]
        },
        {
          "name": "特定の操作権限チェック",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"permission\": \"contract.read\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/auth/check-permission",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "auth",
                "check-permission"
              ]
            }
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 200) {",
                  "    pm.test('Permission check successful', function () {",
                  "        const responseJson = pm.response.json();",
                  "        pm.expect(responseJson.success).to.be.true;",
                  "        pm.expect(responseJson.data).to.have.property('hasPermission');",
                  "        pm.expect(responseJson.data.hasPermission).to.be.a('boolean');",
                  "    });",
                  "}"
                ]
              }
            }
          ]
        },
        {
          "name": "リソース・アクション権限チェック",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/auth/can/contract/read",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "auth",
                "can",
                "contract",
                "read"
              ]
            }
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Resource action permission check successful', function () {",
                  "    const responseJson = pm.response.json();",
                  "    pm.expect(responseJson.success).to.be.true;",
                  "    pm.expect(responseJson.data).to.have.property('hasPermission');",
                  "    pm.expect(responseJson.data.hasPermission).to.be.a('boolean');",
                  "});"
                ]
              }
            }
          ]
        }
      ]
    },
    {
      "name": "墓石情報管理",
      "item": [
        {
          "name": "墓石情報一覧取得",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/gravestones?page=1&limit=10&sort=created_at",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "gravestones"
              ],
              "query": [
                {
                  "key": "page",
                  "value": "1"
                },
                {
                  "key": "limit",
                  "value": "10"
                },
                {
                  "key": "sort",
                  "value": "created_at"
                }
              ]
            }
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Response has valid structure', function () {",
                  "    const responseJson = pm.response.json();",
                  "    pm.expect(responseJson.success).to.be.true;",
                  "    pm.expect(responseJson.data).to.have.property('gravestones');",
                  "    pm.expect(responseJson.data).to.have.property('pagination');",
                  "    pm.expect(responseJson.data.gravestones).to.be.an('array');",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "墓石情報詳細取得",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/gravestones/1",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "gravestones",
                "1"
              ]
            }
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Response has valid gravestone data', function () {",
                  "    const responseJson = pm.response.json();",
                  "    pm.expect(responseJson.success).to.be.true;",
                  "    pm.expect(responseJson.data).to.have.property('gravestone');",
                  "    pm.expect(responseJson.data.gravestone).to.have.property('id');",
                  "    pm.expect(responseJson.data.gravestone).to.have.property('gravestone_code');",
                  "    pm.expect(responseJson.data.gravestone).to.have.property('usage_status');",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "墓石情報検索",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/gravestones/search?q=A-001&cemetery_type=一般墓&usage_status=使用中",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "gravestones",
                "search"
              ],
              "query": [
                {
                  "key": "q",
                  "value": "A-001"
                },
                {
                  "key": "cemetery_type",
                  "value": "一般墓"
                },
                {
                  "key": "usage_status",
                  "value": "使用中"
                }
              ]
            }
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Search results are valid', function () {",
                  "    const responseJson = pm.response.json();",
                  "    pm.expect(responseJson.success).to.be.true;",
                  "    pm.expect(responseJson.data).to.have.property('gravestones');",
                  "    pm.expect(responseJson.data.gravestones).to.be.an('array');",
                  "    pm.expect(responseJson.data).to.have.property('total_count');",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "墓石情報登録",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"gravestone_code\": \"A-001\",\n  \"cemetery_type\": \"一般墓\",\n  \"usage_status\": \"使用中\",\n  \"installation_date\": \"2024-01-15\",\n  \"material\": \"御影石\",\n  \"size\": \"90cm x 180cm\",\n  \"inscription\": \"山田家之墓\",\n  \"location_details\": \"第1区画 A列 1番\",\n  \"maintenance_notes\": \"年次点検実施済み\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/gravestones",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "gravestones"
              ]
            }
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 201', function () {",
                  "    pm.response.to.have.status(201);",
                  "});",
                  "",
                  "pm.test('Gravestone created successfully', function () {",
                  "    const responseJson = pm.response.json();",
                  "    pm.expect(responseJson.success).to.be.true;",
                  "    pm.expect(responseJson.data).to.have.property('gravestone');",
                  "    pm.expect(responseJson.data.gravestone).to.have.property('id');",
                  "    pm.expect(responseJson.data.gravestone.gravestone_code).to.eql('A-001');",
                  "    pm.expect(responseJson.data.gravestone.usage_status).to.eql('使用中');",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "墓石情報更新",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"usage_status\": \"空き\",\n  \"maintenance_notes\": \"2024年度点検完了。清掃実施。\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/gravestones/1",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "gravestones",
                "1"
              ]
            }
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Gravestone updated successfully', function () {",
                  "    const responseJson = pm.response.json();",
                  "    pm.expect(responseJson.success).to.be.true;",
                  "    pm.expect(responseJson.data).to.have.property('gravestone');",
                  "    pm.expect(responseJson.data.gravestone).to.have.property('id');",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "墓石情報削除",
          "request": {
            "method": "DELETE",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/gravestones/1",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "gravestones",
                "1"
              ]
            }
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Gravestone deleted successfully', function () {",
                  "    const responseJson = pm.response.json();",
                  "    pm.expect(responseJson.success).to.be.true;",
                  "    pm.expect(responseJson.message).to.include('削除');",
                  "});"
                ]
              }
            }
          ]
        }
      ]
    },
    {
      "name": "マスターデータ",
      "item": [
        {
          "name": "支払方法マスター取得",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/masters/payment-methods",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "masters",
                "payment-methods"
              ]
            }
          },
          "response": []
        },
        {
          "name": "墓地種別マスター取得",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/masters/grave-types",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "masters",
                "grave-types"
              ]
            }
          },
          "response": []
        },
        {
          "name": "宗派マスター取得",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/masters/religious-sects",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "masters",
                "religious-sects"
              ]
            }
          },
          "response": []
        },
        {
          "name": "マスタデータ一覧取得（汎用）",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/masters/payment-methods",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "masters",
                "payment-methods"
              ]
            }
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Master data retrieved successfully', function () {",
                  "    const responseJson = pm.response.json();",
                  "    pm.expect(responseJson.success).to.be.true;",
                  "    pm.expect(responseJson.data).to.have.property('items');",
                  "    pm.expect(responseJson.data.items).to.be.an('array');",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "マスタデータ登録",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"新しい支払方法\",\n  \"code\": \"NEW_PAYMENT\",\n  \"description\": \"新しく追加された支払方法\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/masters/payment-methods",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "masters",
                "payment-methods"
              ]
            }
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 201', function () {",
                  "    pm.response.to.have.status(201);",
                  "});",
                  "",
                  "pm.test('Master data created successfully', function () {",
                  "    const responseJson = pm.response.json();",
                  "    pm.expect(responseJson.success).to.be.true;",
                  "    pm.expect(responseJson.data).to.have.property('item');",
                  "    pm.expect(responseJson.data.item).to.have.property('id');",
                  "    pm.expect(responseJson.data.item.name).to.eql('新しい支払方法');",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "マスタデータ更新",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"更新された支払方法\",\n  \"description\": \"説明文を更新\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/masters/payment-methods/1",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "masters",
                "payment-methods",
                "1"
              ]
            }
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Master data updated successfully', function () {",
                  "    const responseJson = pm.response.json();",
                  "    pm.expect(responseJson.success).to.be.true;",
                  "    pm.expect(responseJson.data).to.have.property('item');",
                  "    pm.expect(responseJson.data.item).to.have.property('id');",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "マスタデータ削除",
          "request": {
            "method": "DELETE",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/masters/payment-methods/1",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "masters",
                "payment-methods",
                "1"
              ]
            }
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Master data deleted successfully', function () {",
                  "    const responseJson = pm.response.json();",
                  "    pm.expect(responseJson.success).to.be.true;",
                  "    pm.expect(responseJson.message).to.include('削除');",
                  "});"
                ]
              }
            }
          ]
        }
      ]
    },
    {
      "name": "家族連絡先",
      "item": [
        {
          "name": "家族連絡先一覧取得",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/gravestones/1/family-contacts",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "gravestones",
                "1",
                "family-contacts"
              ]
            }
          },
          "response": []
        },
        {
          "name": "家族連絡先作成",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"山田花子\",\n  \"relationship\": \"妻\",\n  \"phone\": \"090-1234-5678\",\n  \"email\": \"yamada.hanako@example.com\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/gravestones/1/family-contacts",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "gravestones",
                "1",
                "family-contacts"
              ]
            }
          },
          "response": []
        },
        {
          "name": "家族連絡先更新",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"phone\": \"090-9876-5432\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/family-contacts/1",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "family-contacts",
                "1"
              ]
            }
          },
          "response": []
        },
        {
          "name": "家族連絡先削除",
          "request": {
            "method": "DELETE",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/family-contacts/1",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "family-contacts",
                "1"
              ]
            }
          },
          "response": []
        }
      ]
    },
    {
      "name": "埋葬情報",
      "item": [
        {
          "name": "埋葬情報一覧取得",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/gravestones/1/burials",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "gravestones",
                "1",
                "burials"
              ]
            }
          },
          "response": []
        },
        {
          "name": "埋葬情報作成",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"deceased_name\": \"山田太郎\",\n  \"deceased_kana\": \"ヤマダタロウ\",\n  \"death_date\": \"2024-01-15\",\n  \"burial_date\": \"2024-01-20\",\n  \"age\": 75\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/gravestones/1/burials",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "gravestones",
                "1",
                "burials"
              ]
            }
          },
          "response": []
        },
        {
          "name": "埋葬情報更新",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"burial_date\": \"2024-01-22\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/burials/1",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "burials",
                "1"
              ]
            }
          },
          "response": []
        },
        {
          "name": "埋葬情報削除",
          "request": {
            "method": "DELETE",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/burials/1",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "burials",
                "1"
              ]
            }
          },
          "response": []
        }
      ]
    },
    {
      "name": "工事情報",
      "item": [
        {
          "name": "工事情報一覧取得",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/gravestones/1/constructions",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "gravestones",
                "1",
                "constructions"
              ]
            }
          },
          "response": []
        },
        {
          "name": "工事情報作成",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"construction_type\": \"墓石建立\",\n  \"construction_date\": \"2024-03-01\",\n  \"completion_date\": \"2024-03-15\",\n  \"cost\": 500000,\n  \"contractor_name\": \"石材工業\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/gravestones/1/constructions",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "gravestones",
                "1",
                "constructions"
              ]
            }
          },
          "response": []
        },
        {
          "name": "工事情報更新",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"completion_date\": \"2024-03-20\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/constructions/1",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "constructions",
                "1"
              ]
            }
          },
          "response": []
        },
        {
          "name": "工事情報削除",
          "request": {
            "method": "DELETE",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/constructions/1",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "constructions",
                "1"
              ]
            }
          },
          "response": []
        }
      ]
    },
    {
      "name": "契約者履歴",
      "item": [
        {
          "name": "契約者履歴一覧取得",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/gravestones/1/contractor-histories",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "gravestones",
                "1",
                "contractor-histories"
              ]
            }
          },
          "response": []
        },
        {
          "name": "契約者履歴作成",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"contractor_name\": \"山田次郎\",\n  \"contractor_kana\": \"ヤマダジロウ\",\n  \"change_date\": \"2024-04-01\",\n  \"change_reason\": \"承継\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/gravestones/1/contractor-histories",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "gravestones",
                "1",
                "contractor-histories"
              ]
            }
          },
          "response": []
        }
      ]
    },
    {
      "name": "申込者情報管理",
      "item": [
        {
          "name": "申込者情報詳細取得",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/applicants/1",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "applicants",
                "1"
              ]
            }
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Response has valid applicant data', function () {",
                  "    const responseJson = pm.response.json();",
                  "    pm.expect(responseJson.success).to.be.true;",
                  "    pm.expect(responseJson.data).to.have.property('applicant');",
                  "    pm.expect(responseJson.data.applicant).to.have.property('id');",
                  "    pm.expect(responseJson.data.applicant).to.have.property('name');",
                  "    pm.expect(responseJson.data.applicant).to.have.property('gravestone_id');",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "申込者情報登録",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"gravestone_id\": 1,\n  \"application_date\": \"2024-01-15\",\n  \"staff_in_charge\": \"田中太郎\",\n  \"name\": \"山田花子\",\n  \"kana\": \"やまだはなこ\",\n  \"postal_code\": \"123-4567\",\n  \"address\": \"東京都渋谷区〇〇1-2-3\",\n  \"phone\": \"03-1234-5678\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/applicants",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "applicants"
              ]
            }
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 201', function () {",
                  "    pm.response.to.have.status(201);",
                  "});",
                  "",
                  "pm.test('Applicant created successfully', function () {",
                  "    const responseJson = pm.response.json();",
                  "    pm.expect(responseJson.success).to.be.true;",
                  "    pm.expect(responseJson.data).to.have.property('applicant');",
                  "    pm.expect(responseJson.data.applicant).to.have.property('id');",
                  "    pm.expect(responseJson.data.applicant.name).to.eql('山田花子');",
                  "    pm.expect(responseJson.data.applicant.gravestone_id).to.eql(1);",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "申込者情報更新",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"phone\": \"03-9876-5432\",\n  \"address\": \"東京都渋谷区〇〇2-3-4\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/applicants/1",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "applicants",
                "1"
              ]
            }
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Applicant updated successfully', function () {",
                  "    const responseJson = pm.response.json();",
                  "    pm.expect(responseJson.success).to.be.true;",
                  "    pm.expect(responseJson.data).to.have.property('applicant');",
                  "    pm.expect(responseJson.data.applicant).to.have.property('id');",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "申込者情報削除",
          "request": {
            "method": "DELETE",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/applicants/1",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "applicants",
                "1"
              ]
            }
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Applicant deleted successfully', function () {",
                  "    const responseJson = pm.response.json();",
                  "    pm.expect(responseJson.success).to.be.true;",
                  "    pm.expect(responseJson.message).to.include('削除');",
                  "});"
                ]
              }
            }
          ]
        }
      ]
    },
    {
      "name": "契約者情報管理",
      "item": [
        {
          "name": "契約者情報詳細取得",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/contractors/1",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "contractors",
                "1"
              ]
            }
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Response has valid contractor data', function () {",
                  "    const responseJson = pm.response.json();",
                  "    pm.expect(responseJson.success).to.be.true;",
                  "    pm.expect(responseJson.data).to.have.property('contractor');",
                  "    pm.expect(responseJson.data.contractor).to.have.property('id');",
                  "    pm.expect(responseJson.data.contractor).to.have.property('name');",
                  "    pm.expect(responseJson.data.contractor).to.have.property('gravestone_id');",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "契約者検索",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/contractors/search?q=山田&phone=03-1234&permission_date_from=2024-01-01&permission_date_to=2024-12-31",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "contractors",
                "search"
              ],
              "query": [
                {
                  "key": "q",
                  "value": "山田"
                },
                {
                  "key": "phone",
                  "value": "03-1234"
                },
                {
                  "key": "permission_date_from",
                  "value": "2024-01-01"
                },
                {
                  "key": "permission_date_to",
                  "value": "2024-12-31"
                }
              ]
            }
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Search results are valid', function () {",
                  "    const responseJson = pm.response.json();",
                  "    pm.expect(responseJson.success).to.be.true;",
                  "    pm.expect(responseJson.data).to.have.property('contractors');",
                  "    pm.expect(responseJson.data.contractors).to.be.an('array');",
                  "    pm.expect(responseJson.data).to.have.property('total_count');",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "契約者情報登録",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"gravestone_id\": 1,\n  \"consent_number\": \"C-2024-001\",\n  \"permission_date\": \"2024-01-20\",\n  \"start_date\": \"2024-02-01\",\n  \"name\": \"山田太郎\",\n  \"kana\": \"やまだたろう\",\n  \"birth_date\": \"1965-03-15\",\n  \"gender\": \"男性\",\n  \"postal_code\": \"123-4567\",\n  \"address\": \"東京都渋谷区〇〇1-2-3\",\n  \"phone\": \"03-1234-5678\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/contractors",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "contractors"
              ]
            }
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 201', function () {",
                  "    pm.response.to.have.status(201);",
                  "});",
                  "",
                  "pm.test('Contractor created successfully', function () {",
                  "    const responseJson = pm.response.json();",
                  "    pm.expect(responseJson.success).to.be.true;",
                  "    pm.expect(responseJson.data).to.have.property('contractor');",
                  "    pm.expect(responseJson.data.contractor).to.have.property('id');",
                  "    pm.expect(responseJson.data.contractor.name).to.eql('山田太郎');",
                  "    pm.expect(responseJson.data.contractor.gravestone_id).to.eql(1);",
                  "    pm.expect(responseJson.data.contractor.consent_number).to.eql('C-2024-001');",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "契約者情報更新",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"phone\": \"03-9876-5432\",\n  \"address\": \"東京都渋谷区〇〇2-3-4\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/contractors/1",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "contractors",
                "1"
              ]
            }
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Contractor updated successfully', function () {",
                  "    const responseJson = pm.response.json();",
                  "    pm.expect(responseJson.success).to.be.true;",
                  "    pm.expect(responseJson.data).to.have.property('contractor');",
                  "    pm.expect(responseJson.data.contractor).to.have.property('id');",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "契約者情報削除",
          "request": {
            "method": "DELETE",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/contractors/1",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "contractors",
                "1"
              ]
            }
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Contractor deleted successfully', function () {",
                  "    const responseJson = pm.response.json();",
                  "    pm.expect(responseJson.success).to.be.true;",
                  "    pm.expect(responseJson.message).to.include('削除');",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "契約者変更（業務固有API）",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"new_contractor_name\": \"山田次郎\",\n  \"new_contractor_kana\": \"やまだじろう\",\n  \"new_contractor_birth_date\": \"1970-05-20\",\n  \"new_contractor_gender\": \"男性\",\n  \"new_contractor_postal_code\": \"123-4567\",\n  \"new_contractor_address\": \"東京都渋谷区〇〇1-2-3\",\n  \"new_contractor_phone\": \"03-1234-5678\",\n  \"transfer_date\": \"2024-04-01\",\n  \"transfer_reason\": \"承継\",\n  \"notes\": \"長男への承継により契約者変更\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/contractors/1/transfer",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "contractors",
                "1",
                "transfer"
              ]
            }
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Contractor transfer successful', function () {",
                  "    const responseJson = pm.response.json();",
                  "    pm.expect(responseJson.success).to.be.true;",
                  "    pm.expect(responseJson.data).to.have.property('contractor');",
                  "    pm.expect(responseJson.data).to.have.property('history');",
                  "    pm.expect(responseJson.data.contractor).to.have.property('id');",
                  "    pm.expect(responseJson.data.history).to.have.property('id');",
                  "});"
                ]
              }
            }
          ]
        }
      ]
    },
    {
      "name": "使用料情報管理",
      "item": [
        {
          "name": "使用料情報登録",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"gravestone_id\": 1,\n  \"calculation_type\": \"面積計算\",\n  \"area\": 3.6,\n  \"usage_fee\": 500000,\n  \"tax_type\": \"税込\",\n  \"billing_years\": 1,\n  \"unit_price\": 138888,\n  \"payment_method\": \"銀行口座振替\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/usage-fees",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "usage-fees"
              ]
            }
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 201', function () {",
                  "    pm.response.to.have.status(201);",
                  "});",
                  "",
                  "pm.test('Usage fee created successfully', function () {",
                  "    const responseJson = pm.response.json();",
                  "    pm.expect(responseJson.success).to.be.true;",
                  "    pm.expect(responseJson.data).to.have.property('usage_fee');",
                  "    pm.expect(responseJson.data.usage_fee).to.have.property('id');",
                  "    pm.expect(responseJson.data.usage_fee.gravestone_id).to.eql(1);",
                  "    pm.expect(responseJson.data.usage_fee.calculation_type).to.eql('面積計算');",
                  "    pm.expect(responseJson.data.usage_fee.usage_fee).to.eql(500000);",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "使用料情報更新",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"usage_fee\": 520000,\n  \"unit_price\": 144444,\n  \"payment_method\": \"現金\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/usage-fees/1",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "usage-fees",
                "1"
              ]
            }
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Usage fee updated successfully', function () {",
                  "    const responseJson = pm.response.json();",
                  "    pm.expect(responseJson.success).to.be.true;",
                  "    pm.expect(responseJson.data).to.have.property('usage_fee');",
                  "    pm.expect(responseJson.data.usage_fee).to.have.property('id');",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "使用料情報削除",
          "request": {
            "method": "DELETE",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/usage-fees/1",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "usage-fees",
                "1"
              ]
            }
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Usage fee deleted successfully', function () {",
                  "    const responseJson = pm.response.json();",
                  "    pm.expect(responseJson.success).to.be.true;",
                  "    pm.expect(responseJson.message).to.include('削除');",
                  "});"
                ]
              }
            }
          ]
        }
      ]
    },
    {
      "name": "管理料情報管理",
      "item": [
        {
          "name": "管理料情報登録",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"gravestone_id\": 1,\n  \"calculation_type\": \"面積計算\",\n  \"billing_type\": \"年1回\",\n  \"area\": 3.6,\n  \"management_fee\": 36000,\n  \"last_billing_date\": \"2024-01-31\",\n  \"tax_type\": \"税込\",\n  \"billing_years\": 10,\n  \"billing_month\": 3,\n  \"unit_price\": 10000,\n  \"payment_method\": \"銀行口座振替\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/management-fees",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "management-fees"
              ]
            }
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 201', function () {",
                  "    pm.response.to.have.status(201);",
                  "});",
                  "",
                  "pm.test('Management fee created successfully', function () {",
                  "    const responseJson = pm.response.json();",
                  "    pm.expect(responseJson.success).to.be.true;",
                  "    pm.expect(responseJson.data).to.have.property('management_fee');",
                  "    pm.expect(responseJson.data.management_fee).to.have.property('id');",
                  "    pm.expect(responseJson.data.management_fee.gravestone_id).to.eql(1);",
                  "    pm.expect(responseJson.data.management_fee.calculation_type).to.eql('面積計算');",
                  "    pm.expect(responseJson.data.management_fee.management_fee).to.eql(36000);",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "管理料情報更新",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"management_fee\": 38000,\n  \"unit_price\": 10555,\n  \"billing_month\": 4,\n  \"payment_method\": \"現金\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/management-fees/1",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "management-fees",
                "1"
              ]
            }
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Management fee updated successfully', function () {",
                  "    const responseJson = pm.response.json();",
                  "    pm.expect(responseJson.success).to.be.true;",
                  "    pm.expect(responseJson.data).to.have.property('management_fee');",
                  "    pm.expect(responseJson.data.management_fee).to.have.property('id');",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "管理料情報削除",
          "request": {
            "method": "DELETE",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/management-fees/1",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "management-fees",
                "1"
              ]
            }
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Management fee deleted successfully', function () {",
                  "    const responseJson = pm.response.json();",
                  "    pm.expect(responseJson.success).to.be.true;",
                  "    pm.expect(responseJson.message).to.include('削除');",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "管理料計算（業務固有API）",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"gravestone_id\": 1,\n  \"calculation_type\": \"面積計算\",\n  \"area\": 3.6,\n  \"unit_price\": 10000,\n  \"billing_years\": 10\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/management-fees/calculate",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "management-fees",
                "calculate"
              ]
            }
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Management fee calculation successful', function () {",
                  "    const responseJson = pm.response.json();",
                  "    pm.expect(responseJson.success).to.be.true;",
                  "    pm.expect(responseJson.data).to.have.property('calculation');",
                  "    pm.expect(responseJson.data.calculation).to.have.property('total_fee');",
                  "    pm.expect(responseJson.data.calculation).to.have.property('annual_fee');",
                  "    pm.expect(responseJson.data.calculation).to.have.property('area');",
                  "    pm.expect(responseJson.data.calculation).to.have.property('unit_price');",
                  "});"
                ]
              }
            }
          ]
        }
      ]
    },
    {
      "name": "請求情報管理",
      "item": [
        {
          "name": "請求情報登録",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"gravestone_id\": 1,\n  \"contractor_id\": 1,\n  \"billing_type\": \"管理料\",\n  \"bank_name\": \"みずほ銀行\",\n  \"branch_name\": \"渋谷支店\",\n  \"account_type\": \"普通\",\n  \"account_number\": \"1234567\",\n  \"account_holder\": \"ヤマダ タロウ\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/billing-infos",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "billing-infos"
              ]
            }
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 201', function () {",
                  "    pm.response.to.have.status(201);",
                  "});",
                  "",
                  "pm.test('Billing info created successfully', function () {",
                  "    const responseJson = pm.response.json();",
                  "    pm.expect(responseJson.success).to.be.true;",
                  "    pm.expect(responseJson.data).to.have.property('billing_info');",
                  "    pm.expect(responseJson.data.billing_info).to.have.property('id');",
                  "    pm.expect(responseJson.data.billing_info.gravestone_id).to.eql(1);",
                  "    pm.expect(responseJson.data.billing_info.contractor_id).to.eql(1);",
                  "    pm.expect(responseJson.data.billing_info.billing_type).to.eql('管理料');",
                  "    pm.expect(responseJson.data.billing_info.bank_name).to.eql('みずほ銀行');",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "請求情報更新",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"bank_name\": \"三井住友銀行\",\n  \"branch_name\": \"新宿支店\",\n  \"account_number\": \"7654321\",\n  \"account_holder\": \"ヤマダ ジロウ\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/billing-infos/1",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "billing-infos",
                "1"
              ]
            }
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Billing info updated successfully', function () {",
                  "    const responseJson = pm.response.json();",
                  "    pm.expect(responseJson.success).to.be.true;",
                  "    pm.expect(responseJson.data).to.have.property('billing_info');",
                  "    pm.expect(responseJson.data.billing_info).to.have.property('id');",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "請求情報削除",
          "request": {
            "method": "DELETE",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/billing-infos/1",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "billing-infos",
                "1"
              ]
            }
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Billing info deleted successfully', function () {",
                  "    const responseJson = pm.response.json();",
                  "    pm.expect(responseJson.success).to.be.true;",
                  "    pm.expect(responseJson.message).to.include('削除');",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "請求データ生成（業務固有API）",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"billing_type\": \"管理料\",\n  \"target_year\": 2024,\n  \"target_month\": 3,\n  \"contractor_ids\": [1, 2, 3]\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/billing-infos/generate",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "billing-infos",
                "generate"
              ]
            }
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Billing data generation successful', function () {",
                  "    const responseJson = pm.response.json();",
                  "    pm.expect(responseJson.success).to.be.true;",
                  "    pm.expect(responseJson.data).to.have.property('billing_data');",
                  "    pm.expect(responseJson.data.billing_data).to.be.an('array');",
                  "    pm.expect(responseJson.data).to.have.property('total_count');",
                  "    pm.expect(responseJson.data).to.have.property('total_amount');",
                  "});"
                ]
              }
            }
          ]
        }
      ]
    },
    {
      "name": "履歴情報管理",
      "item": [
        {
          "name": "変更履歴取得",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/histories?gravestone_id=1&contractor_id=1&page=1&limit=10",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "histories"
              ],
              "query": [
                {
                  "key": "gravestone_id",
                  "value": "1"
                },
                {
                  "key": "contractor_id",
                  "value": "1"
                },
                {
                  "key": "page",
                  "value": "1"
                },
                {
                  "key": "limit",
                  "value": "10"
                }
              ]
            }
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('History data retrieved successfully', function () {",
                  "    const responseJson = pm.response.json();",
                  "    pm.expect(responseJson.success).to.be.true;",
                  "    pm.expect(responseJson.data).to.have.property('histories');",
                  "    pm.expect(responseJson.data.histories).to.be.an('array');",
                  "    pm.expect(responseJson.data).to.have.property('pagination');",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "変更履歴詳細取得",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/histories/1",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "histories",
                "1"
              ]
            }
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('History detail retrieved successfully', function () {",
                  "    const responseJson = pm.response.json();",
                  "    pm.expect(responseJson.success).to.be.true;",
                  "    pm.expect(responseJson.data).to.have.property('history');",
                  "    pm.expect(responseJson.data.history).to.have.property('id');",
                  "    pm.expect(responseJson.data.history).to.have.property('change_type');",
                  "    pm.expect(responseJson.data.history).to.have.property('before_data');",
                  "    pm.expect(responseJson.data.history).to.have.property('after_data');",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "データ復元（履歴からの復旧）",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"reason\": \"誤った変更があったため、履歴から復元します\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/histories/1/restore",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "histories",
                "1",
                "restore"
              ]
            }
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Data restoration successful', function () {",
                  "    const responseJson = pm.response.json();",
                  "    pm.expect(responseJson.success).to.be.true;",
                  "    pm.expect(responseJson.data).to.have.property('restored_data');",
                  "    pm.expect(responseJson.data).to.have.property('new_history_id');",
                  "    pm.expect(responseJson.message).to.include('復元');",
                  "});"
                ]
              }
            }
          ]
        }
      ]
    },
    {
      "name": "ユーザー・ロール管理",
      "item": [
        {
          "name": "ユーザー一覧取得",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/users?page=1&limit=10&role=admin",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "users"
              ],
              "query": [
                {
                  "key": "page",
                  "value": "1"
                },
                {
                  "key": "limit",
                  "value": "10"
                },
                {
                  "key": "role",
                  "value": "admin"
                }
              ]
            }
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Users retrieved successfully', function () {",
                  "    const responseJson = pm.response.json();",
                  "    pm.expect(responseJson.success).to.be.true;",
                  "    pm.expect(responseJson.data).to.have.property('users');",
                  "    pm.expect(responseJson.data.users).to.be.an('array');",
                  "    pm.expect(responseJson.data).to.have.property('pagination');",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "ユーザー詳細取得",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/users/1",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "users",
                "1"
              ]
            }
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('User detail retrieved successfully', function () {",
                  "    const responseJson = pm.response.json();",
                  "    pm.expect(responseJson.success).to.be.true;",
                  "    pm.expect(responseJson.data).to.have.property('user');",
                  "    pm.expect(responseJson.data.user).to.have.property('id');",
                  "    pm.expect(responseJson.data.user).to.have.property('name');",
                  "    pm.expect(responseJson.data.user).to.have.property('email');",
                  "    pm.expect(responseJson.data.user).to.have.property('role');",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "ユーザーロール変更",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"role_id\": 2,\n  \"reason\": \"管理者権限付与のため\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/users/1/role",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "users",
                "1",
                "role"
              ]
            }
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('User role updated successfully', function () {",
                  "    const responseJson = pm.response.json();",
                  "    pm.expect(responseJson.success).to.be.true;",
                  "    pm.expect(responseJson.data).to.have.property('user');",
                  "    pm.expect(responseJson.data.user).to.have.property('role');",
                  "    pm.expect(responseJson.message).to.include('ロール');",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "ロール一覧取得",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/roles",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "roles"
              ]
            }
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Roles retrieved successfully', function () {",
                  "    const responseJson = pm.response.json();",
                  "    pm.expect(responseJson.success).to.be.true;",
                  "    pm.expect(responseJson.data).to.have.property('roles');",
                  "    pm.expect(responseJson.data.roles).to.be.an('array');",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "ロール作成",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"新しいロール\",\n  \"description\": \"特定業務用の新しいロール\",\n  \"permissions\": [\"gravestone.read\", \"gravestone.create\", \"contractor.read\"]\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/roles",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "roles"
              ]
            }
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 201', function () {",
                  "    pm.response.to.have.status(201);",
                  "});",
                  "",
                  "pm.test('Role created successfully', function () {",
                  "    const responseJson = pm.response.json();",
                  "    pm.expect(responseJson.success).to.be.true;",
                  "    pm.expect(responseJson.data).to.have.property('role');",
                  "    pm.expect(responseJson.data.role).to.have.property('id');",
                  "    pm.expect(responseJson.data.role.name).to.eql('新しいロール');",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "ロール更新",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"更新されたロール\",\n  \"description\": \"説明を更新\",\n  \"permissions\": [\"gravestone.read\", \"gravestone.create\", \"gravestone.update\", \"contractor.read\"]\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/roles/1",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "roles",
                "1"
              ]
            }
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Role updated successfully', function () {",
                  "    const responseJson = pm.response.json();",
                  "    pm.expect(responseJson.success).to.be.true;",
                  "    pm.expect(responseJson.data).to.have.property('role');",
                  "    pm.expect(responseJson.data.role).to.have.property('id');",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "ロール削除",
          "request": {
            "method": "DELETE",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/roles/1",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "roles",
                "1"
              ]
            }
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Role deleted successfully', function () {",
                  "    const responseJson = pm.response.json();",
                  "    pm.expect(responseJson.success).to.be.true;",
                  "    pm.expect(responseJson.message).to.include('削除');",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "権限マトリクス取得",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/permissions/matrix",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "permissions",
                "matrix"
              ]
            }
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Permission matrix retrieved successfully', function () {",
                  "    const responseJson = pm.response.json();",
                  "    pm.expect(responseJson.success).to.be.true;",
                  "    pm.expect(responseJson.data).to.have.property('matrix');",
                  "    pm.expect(responseJson.data.matrix).to.be.an('object');",
                  "    pm.expect(responseJson.data).to.have.property('roles');",
                  "    pm.expect(responseJson.data).to.have.property('permissions');",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "権限マトリクス更新",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"matrix\": {\n    \"1\": [\"gravestone.read\", \"gravestone.create\", \"contractor.read\"],\n    \"2\": [\"gravestone.read\", \"gravestone.create\", \"gravestone.update\", \"gravestone.delete\", \"contractor.read\", \"contractor.create\", \"contractor.update\", \"contractor.delete\"]\n  }\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/permissions/matrix",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "permissions",
                "matrix"
              ]
            }
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Permission matrix updated successfully', function () {",
                  "    const responseJson = pm.response.json();",
                  "    pm.expect(responseJson.success).to.be.true;",
                  "    pm.expect(responseJson.data).to.have.property('matrix');",
                  "    pm.expect(responseJson.message).to.include('更新');",
                  "});"
                ]
              }
            }
          ]
        }
      ]
    },
    {
      "name": "バッチ処理・その他",
      "item": [
        {
          "name": "一括データインポート",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              },
              {
                "key": "Content-Type",
                "value": "multipart/form-data"
              }
            ],
            "body": {
              "mode": "formdata",
              "formdata": [
                {
                  "key": "file",
                  "type": "file",
                  "src": ""
                },
                {
                  "key": "type",
                  "value": "gravestones",
                  "type": "text"
                },
                {
                  "key": "options",
                  "value": "{\"validate_before_import\": true, \"skip_duplicates\": false}",
                  "type": "text"
                }
              ]
            },
            "url": {
              "raw": "{{baseUrl}}/import",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "import"
              ]
            }
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 200 or 202', function () {",
                  "    pm.expect(pm.response.code).to.be.oneOf([200, 202]);",
                  "});",
                  "",
                  "pm.test('Import started successfully', function () {",
                  "    const responseJson = pm.response.json();",
                  "    pm.expect(responseJson.success).to.be.true;",
                  "    pm.expect(responseJson.data).to.have.property('import_id');",
                  "    pm.expect(responseJson.data).to.have.property('status');",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "データエクスポート",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/export?type=gravestones&format=csv&date_from=2024-01-01&date_to=2024-12-31",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "export"
              ],
              "query": [
                {
                  "key": "type",
                  "value": "gravestones"
                },
                {
                  "key": "format",
                  "value": "csv"
                },
                {
                  "key": "date_from",
                  "value": "2024-01-01"
                },
                {
                  "key": "date_to",
                  "value": "2024-12-31"
                }
              ]
            }
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Export data retrieved successfully', function () {",
                  "    const responseJson = pm.response.json();",
                  "    pm.expect(responseJson.success).to.be.true;",
                  "    pm.expect(responseJson.data).to.have.property('download_url');",
                  "    pm.expect(responseJson.data).to.have.property('file_name');",
                  "    pm.expect(responseJson.data).to.have.property('record_count');",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "レポート生成",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"report_type\": \"usage_summary\",\n  \"parameters\": {\n    \"date_from\": \"2024-01-01\",\n    \"date_to\": \"2024-12-31\",\n    \"cemetery_type\": \"一般墓\",\n    \"format\": \"pdf\"\n  }\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/reports",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "reports"
              ]
            }
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 200 or 202', function () {",
                  "    pm.expect(pm.response.code).to.be.oneOf([200, 202]);",
                  "});",
                  "",
                  "pm.test('Report generation started successfully', function () {",
                  "    const responseJson = pm.response.json();",
                  "    pm.expect(responseJson.success).to.be.true;",
                  "    pm.expect(responseJson.data).to.have.property('report_id');",
                  "    pm.expect(responseJson.data).to.have.property('status');",
                  "});"
                ]
              }
            }
          ]
        }
      ]
    }
  ]
}